<div class="users-page">
  <header class="page-header">
    <h1>Manage Users</h1>
    <button class="add-new-btn" (click)="openUserFormVisible()">
      <span class="icon">+</span> Create new user
    </button>
  </header>

  <div class="users-grid">
    <div class="user-card" *ngFor="let user of users">
      <div class="card-header">
        <div class="avatar">{{ user.name.charAt(0) }}</div>
        <div class="user-info">
          <h3 class="user-name">{{ user.name }}</h3>
          <p class="user-email">{{ user.email }}</p>
        </div>
        <span
          class="status-badge"
          [ngClass]="{
            'status-active': user.status === 'Active',
            'status-pending': user.status === 'Pending',
            'status-deactivated': user.status === 'Deactivated'
          }"
        >
          {{ user.status }}
        </span>
      </div>

      <div class="card-body">
        <div class="detail-item">
          <span class="detail-label">Role</span>
          <span class="detail-value">{{ user.role }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Workspace</span>
          <span class="detail-value">{{ user.workspace_id }}</span>
        </div>
      </div>

      <div class="card-footer">
        <button class="btn btn-secondary edit-button" (click)="editUser(user)">
          Edit
        </button>
        <button
          class="btn btn-secondary delete-button"
          (click)="deleteUser(user._id)"
        >
          Delete
        </button>
      </div>
    </div>
  </div>

  <div class="pagination-controls">
    <button
      class="pagination-btn"
      (click)="decreasePage()"
      [disabled]="page === 1"
    >
      &larr; Previous
    </button>
    <span class="page-info"> Page {{ page }} of {{ totalPages }} </span>
    <button
      class="pagination-btn"
      (click)="increasePage()"
      [disabled]="page === totalPages"
    >
      Next &rarr;
    </button>
  </div>

  <div class="modal-overlay" *ngIf="userFormVisible">
    <div class="modal-content">
      <app-create-user
        (dataEvent)="recieveData($event)"
        [isEditForm]="isEditForm"
        [user]="user"
      ></app-create-user>
    </div>
  </div>
</div>
