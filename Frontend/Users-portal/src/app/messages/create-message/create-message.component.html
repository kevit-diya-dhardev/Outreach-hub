<div class="form-overlay"></div>

<div class="form-card">
  <div class="form-header">
    <h2 *ngIf="mode === 'create'">Create New Message</h2>
    <h2 *ngIf="mode === 'edit'">Edit Message</h2>
    <button class="btn-close" (click)="closeForm()">Ã—</button>
  </div>

  <form [formGroup]="messageForm" class="form-body" (ngSubmit)="submitData()">
    <div class="form-group">
      <label for="message_name">Message Name</label>
      <input
        id="message_name"
        type="text"
        formControlName="name"
        placeholder="e.g., Welcome Offer"
      />
    </div>

    <div class="form-group">
      <label>Message Type</label>
      <div class="custom-dropdown">
        <div
          class="dropdown-trigger"
          (click)="isDropdownOpen = !isDropdownOpen"
        >
          <span>{{ messageForm.get("type")?.value || "Select a type" }}</span>
          <span class="chevron" [class.rotated]="isDropdownOpen"></span>
        </div>
        <ul class="dropdown-menu" *ngIf="isDropdownOpen">
          <li (click)="selectType('Text')">Text</li>
          <li (click)="selectType('Text-Image')">Text-Image</li>
        </ul>
      </div>
    </div>

    <div class="form-group">
      <label for="message_content">Message Content</label>
      <textarea
        id="message_content"
        formControlName="text"
        rows="4"
        placeholder="Enter your message text here..."
      ></textarea>
    </div>

    <div
      class="form-group"
      *ngIf="messageForm.get('type')?.value === 'Text-Image'"
    >
      <label for="imageUrl">Image URL</label>
      <input
        id="imageUrl"
        type="text"
        formControlName="imageUrl"
        placeholder="https://example.com/image.png"
      />
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="closeForm()">
        Cancel
      </button>
      <button type="submit" class="btn btn-primary">
        {{ mode === "create" ? "Create Message" : "Save Changes" }}
      </button>
    </div>
  </form>
</div>
